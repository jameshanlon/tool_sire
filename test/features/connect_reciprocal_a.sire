val N := NUM_CORES-1;

proc foo(var v) is
  chanend c1;
  chanend c2;
{ connect c1:0 to 0;
  connect c2:1;
  c1 ! 0xDEADBEEF;
  c1 ? v
}

proc bar(var v) is
  chanend c1;
  chanend c2;
{ connect c1:0;
  connect c2:1 to N;
  c1 ? v;
  c1 ! v
}

proc main() is
  var u;
  var v;
{ { on N do foo(u) || bar(v) }
; printhexln(u)
; printhexln(v)
}

