proc foo(var v) is
  v := v or 0xDEAD0000

proc bar(var v) is
  v := v or 0x0000BEEF

% Test that we can use all the resources again
proc main() is
  var v;
  var i;
  var b;
{ b := true
; for i in [1 for 10] do
  { v := 0
  ; { on core[NUM_CORES-1] do foo(v)
    ; on core[NUM_CORES-1] do bar(v)
    }
  ; b := (v = 0xDEADBEEF) and b
  }
; if b then printhexln(v)
  else skip
}
