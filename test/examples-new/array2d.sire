val N := 2;

proc main() is
  var i;
  var j;
  var v;
  var w;
  chan x[N*N];
  chan y[N*N];
  par i in [0 for N], j in [0 for N] do
  { x[(i*N)+j]     ? v
  ; x[(i*N)+((j+1) rem N)] ! v + 1
  ; y[(i*N)+j]     ? w
  ; y[(i*N)+((j+1) rem N)] ! w + v
  }
  
