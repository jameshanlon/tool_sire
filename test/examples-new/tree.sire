val D := 3;      % Tree depth
val N := 1 << D; % Number of leaves
val LEN := 100;  % Number of data items at each leaf.

proc leaf(chanend c) is
  skip

proc branch(chanend c, chanend left, chanend right) is
  skip

proc main() is
  chan c[(2*N)-1];
  var enq;
  var result;
  var i;
{ { c[0] ! enq ; c[0] ? result } ||
  par i in [0 for N-1] do
    branch(c[i], c[(2*i)+1], c[(2*i)+2]) ||
  par i in [0 for N] do 
    leaf(c[(N-1) + i])
  }
}

