val N := 2;
  
proc node(val i, chanend left, chanend right) is
  var v;
{ if i = 0
  then 
  { left ! 0 
  ; right ? v 
  ; printvalln(v)
  }
  else
  { left ? v 
  ; right ! v + 1
  }
}

proc main() is
  var i;
  chan c[N];
  par i in [0 for N] do node(i, c[i], c[(i+1) rem N])

