val N := 10;

proc main() is
  chan c[N+1];
  var i;
  var v;
  { { c[0] ! 0
    ; c[N] ? v
    }
  | par i in [0 for N] do
    { c[i-1] ? v
    ; c[i] ! v + 1
    }
  }
